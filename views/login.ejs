<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Admin Login</title>
    <link rel="stylesheet" href="/styles.css" />
  <script>
    (function() {
      'use strict';
      async function applyDynamicStyles() {
        try {
          const response = await fetch('/api/site-styles');
          if (response.ok) {
            const styles = await response.json();
            const root = document.documentElement;
            if (styles.primaryColor) root.style.setProperty('--primary-color', styles.primaryColor);
            if (styles.primaryHoverColor) root.style.setProperty('--primary-hover-color', styles.primaryHoverColor);
            if (styles.secondaryColor) root.style.setProperty('--secondary-color', styles.secondaryColor);
            if (styles.secondaryTextColor) root.style.setProperty('--secondary-text-color', styles.secondaryTextColor);
            if (styles.secondaryHoverColor) root.style.setProperty('--secondary-hover-color', styles.secondaryHoverColor);
            if (styles.backgroundColor) root.style.setProperty('--background-color', styles.backgroundColor);
            if (styles.containerColor) root.style.setProperty('--container-color', styles.containerColor);
            if (styles.textColor) root.style.setProperty('--text-color', styles.textColor);
            if (styles.linkColor) root.style.setProperty('--link-color', styles.linkColor);
            if (styles.linkHoverColor) root.style.setProperty('--link-hover-color', styles.linkHoverColor);
            if (styles.infoIconColor) root.style.setProperty('--info-icon-color', styles.infoIconColor);
            if (styles.infoIconHoverColor) root.style.setProperty('--info-icon-hover-color', styles.infoIconHoverColor);
          } else {
            console.log('No custom styles found or error fetching them (Status: ' + response.status + ').');
          }
        } catch (error) {
          console.error('Error applying dynamic styles:', error);
        }
      }

      // Use 'readystatechange' for potentially even earlier execution
      if (document.readyState === 'loading') {
        // DOM is still loading, add listener for interactive state
        document.addEventListener('readystatechange', function() {
          if (document.readyState === 'interactive') {
             applyDynamicStyles();
          }
        });
      } else {
        // DOM is already interactive or complete
        applyDynamicStyles();
      }
    })();
  </script>
</head>
<body>
    <div class="container">
        <h2>Enter Password to Access The Order Form</h2>
        <p>Leave empty if password should not be needed</p>
        <% if (error) { %>
            <p style="color:red;"><%= error %></p>
        <% } %>
        <form action="/login" method="POST">
            <input type="password" name="password" placeholder="Password"/>
            <button type="submit">Login</button>
        </form>
        <form action="/" method="GET">
        <button class="secondary-button" type="submit">Return</button>
        </form>


    </div>

</body>
</html>
